<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./formmock.css?v=1.1.1" />
    <link rel="stylesheet" href="./DataGridSearch.css" />
    <script src="./formmock.js?v=1.0.7"></script>
    <script src="./DataGridSearch.js"></script>
  </head>
  <body>
    <!-- Header with Add Record Button and Info -->
    <form>
      <div>
        <div class="formmock-header">
          <div class="header-info">
            <div class="header-title">Position Records</div>
            <div class="header-summary" id="headerSummary">
              Showing 1 of 1 records
            </div>
          </div>
          <div class="header-controls">
            <div id="hc-left">
              <div class="toggle-container">
                <label for="enableToggle" class="toggle-label">Enabled</label>
                <label class="toggle-switch">
                  <input type="checkbox" id="enableToggle" checked />
                  <span class="toggle-slider"></span>
                </label>
              </div>
            </div>
            <div id="hc-middle">
              <button
                class="btn-emoji btn-add"
                id="addBtn"
                title="Add New Record"
              >
                ‚ûï
              </button>
            </div>
            <div id="hc-right">
              <div class="DataGridSearch">
                <label for="formmock-search" class="DataGridSearch__label">Search:</label>
                <div class="DataGridSearch__container">
                  <input type="text" id="formmock-search" class="DataGridSearch__input" 
                         placeholder="Search positions..." autocomplete="off">
                  <button type="button" class="DataGridSearch__clear" title="Clear search" 
                          aria-label="Clear search">‚úï</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div>
        <div class="grid-data-row" id="recordForm" style="display: block">
          <div class="row-form" id="rowForm" style="display: none">
            <div class="action-buttons">
              <input
                type="checkbox"
                class="record-checkbox"
                id="recordCheckbox"
                name="datagrid-checkbox"
                hidden="none"
              />
              <button
                class="btn-emoji btn-cancel"
                id="cancelBtn"
                title="Cancel"
              >
                ‚ùå
              </button>
              <button class="btn-emoji btn-save" id="saveBtn" title="Save">
                üíæ
              </button>
            </div>

            <div class="field-group">
              <input
                type="text"
                class="field-input required"
                data-field="position"
                placeholder="Position"
              />
            </div>

            <div class="field-group">
              <label
                class="field-label-display"
                data-field="icontact"
                data-value="2024-01-12"
              >
                2024-01-12
              </label>
            </div>

            <div class="field-group">
              <input
                type="date"
                class="field-input"
                value="2024-02-26"
                data-field="lcontact"
              />
            </div>

            <div class="field-group">
              <select class="field-select required" data-field="companyId">
                <option value="">Select Company...</option>
                <option value="1">TechCorp Inc</option>
                <option value="2">InnovateSoft</option>
                <option value="3">DataDrive Systems</option>
                <option value="4">CloudFirst Technologies</option>
                <option value="5">NextGen Solutions</option>
                <option value="6">DesignWorks Studio</option>
                <option value="7">ServerTech Corp</option>
                <option value="8">TestPro Solutions</option>
                <option value="9">AI Innovations Ltd</option>
                <option value="10">SecureNet Corp</option>
              </select>
            </div>

            <div class="field-group">
              <input
                type="email"
                class="field-input"
                data-field="email"
                placeholder="Enter contact email"
              />
            </div>

            <div class="field-group">
              <input
                type="tel"
                class="field-input"
                data-field="cphone"
                placeholder="(555) 123-4567"
              />
            </div>

            <div class="field-group">
              <input
                type="tel"
                class="field-input"
                data-field="ophone"
                placeholder="(555) 123-4567"
              />
            </div>
          </div>

          <!-- Title Row from jobsearch.json positions schema -->
          <div class="row-title" id="rowTitle" style="display: flex">
            <div class="title-buttons">
              <input
                type="checkbox"
                class="master-checkbox"
                id="masterCheckbox"
                title="Select All"
              />
            </div>

            <div class="title-group field-position">
              <span class="title-label">Position</span>
            </div>

            <div class="title-group field-icontact">
              <span class="title-label">Initial Contact</span>
            </div>

            <div class="title-group field-lcontact">
              <span class="title-label">Last Contact</span>
            </div>

            <div class="title-group field-company">
              <span class="title-label">Company</span>
            </div>

            <div class="title-group field-email">
              <span class="title-label">Email</span>
            </div>

            <div class="title-group field-cphone">
              <span class="title-label">Cell</span>
            </div>

            <div class="title-group field-ophone">
              <span class="title-label">Office</span>
            </div>
          </div>

          <!-- Records Display Area -->
          <div class="records-display" id="recordsDisplay">
            <!-- Individual record rows will be displayed here -->
          </div>
        </div>
      </div>
    </form>

    <!-- Pagination Controls -->
    <div class="pagination-controls" id="paginationControls">
      <div class="page-size-container">
        <label for="pageSizeSelect">Records per page:</label>
        <select id="pageSizeSelect" class="page-size-select">
          <option value="10" selected>10</option>
          <option value="15">15</option>
          <option value="20">20</option>
        </select>
      </div>

      <button class="pagination-btn" id="firstBtn" disabled>First</button>
      <button class="pagination-btn" id="prevBtn" disabled>Previous</button>

      <button class="pagination-btn active" data-page="1">1</button>

      <button class="pagination-btn" id="nextBtn" disabled>Next</button>
      <button class="pagination-btn" id="lastBtn" disabled>Last</button>

      <span class="page-info" id="pageInfo"> Page 1 of 1 </span>
    </div>

    <script>
      // Initialize DataGridSearch after DOM is loaded
      document.addEventListener('DOMContentLoaded', function() {
        // Initialize DataGridSearch with FormMock integration
        // Pass the container element, not the input element
        window.formMockSearch = new DataGridSearch('.DataGridSearch', {
          debounceDelay: 300,
          placeholder: 'Search positions...',
          onSearch: function(searchTerm, instance) {
            // Integration with existing FormMock search functionality
            if (typeof window.performGlobalSearch === 'function') {
              window.performGlobalSearch(searchTerm);
            }
            console.log('DataGridSearch: Searching for "' + searchTerm + '"');
          },
          onClear: function(instance) {
            // Clear existing FormMock search
            if (typeof window.clearSearch === 'function') {
              window.clearSearch();
            }
            console.log('DataGridSearch: Search cleared');
          }
        });
        
        console.log('DataGridSearch initialized successfully');
      });
    </script>
  </body>
</html>
